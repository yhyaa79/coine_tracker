<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جزئیات کوین</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css">
    <link rel="stylesheet" href="/static/css/styles.css">

    <!-- Chart.js و وابستگی‌ها به ترتیب صحیح -->
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.umd.min.js">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@0.2.1/dist/chartjs-chart-financial.js"></script>

    <style>
        canvas {
            width: 100% !important;
            height: 500px !important;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>

<body>

    <div class="main-detail">
        <div class="heder">

        </div>

        <div class="content-detail">
            <div class="inf-detail">
                <div class="coin-detail-container">
                    <div class="loading">در حال بارگذاری اطلاعات کوین...</div>
                </div>
                <div class="calculator">

                    <select id="selectDollarToman">
                        <option value="dollar">دلار</option>
                        <option value="toman">تومان</option>
                    </select>

                    <textarea id="inDollarToman"></textarea>

                    <div style="margin: 10px auto 5px auto;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-arrow-down-up" viewBox="0 0 16 16" style="color: aliceblue;">
                            <path fill-rule="evenodd"
                                d="M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5m-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5" />
                        </svg>
                    </div>

                    <textarea id="inCoin"></textarea>
                </div>
            </div>

            <div class="chart-detail">
                <div class="coin-chart-container">
                    <div class="buttons-chart">
                        <div class="period-buttons">
                            <button class="period-btn" data-period="1">۱ روز</button>
                            <button class="period-btn active" data-period="7">۷ روز</button>
                            <button class="period-btn" data-period="30">۳۰ روز</button>
                            <button class="period-btn" data-period="60">۶۰ روز</button>
                            <button class="period-btn" data-period="120">۱۲۰ روز</button>
                            <button class="period-btn" data-period="all">همه زمان‌ها</button>
                        </div>
                        <div class="chart-line-candle">
                            <div class="chart-type-buttons">
                                <button class="chart-type-btn active" data-type="line">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="3 17 9 11 13 15 21 7"></polyline>
                                        <polyline points="21 7 21 13 15 13"></polyline>
                                    </svg>
                                    خطی
                                </button>
                                <button class="chart-type-btn" data-type="candle">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="6" y="4" width="4" height="16"></rect>
                                        <rect x="14" y="10" width="4" height="10"></rect>
                                        <line x1="8" y1="2" x2="8" y2="22"></line>
                                        <line x1="16" y1="8" x2="16" y2="22"></line>
                                    </svg>
                                    کندل استیک
                                </button>
                            </div>
                        </div>
                    </div>

                    <h2 id="coin-title">در حال بارگذاری...</h2>
                    <div class="loading-chart"></div>
                    <canvas id="priceChart"></canvas>

                    <!-- اینجا chart-stats رو ثابت قرار دادیم -->
                    <div class="chart-stats">
                        <div class="bottom-chart">
                            <div class="stat-item">
                                <div class="stat-label">تغییرات</div>
                                <div class="stat-value stat-change-positive">+0.00%</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">بالاترین</div>
                                <div class="stat-value stat-high-low">$0.00</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">پایین‌ترین</div>
                                <div class="stat-value stat-high-low">$0.00</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">میانگین حجم</div>
                                <div class="stat-value stat-volume">$0.00B</div>
                            </div>
                        </div>
                    </div>

                    <!-- توضیحات دقیقاً زیر آمار میاد و همیشه در جای درست هست -->
                    <div id="descriptionCoin"></div>
                </div>

            </div>

            <div class="comment-detail">
                <div class="survey" id="surveyCoin">
                    <p>احساس جامعه نسبت به <span id="coinName"></span></p>

                    <div class="sentiment-bar-container">
                        <div class="sentiment-bar">
                            <div class="bullish-fill" id="bullishFill"></div>
                            <div class="bearish-fill" id="bearishFill"></div>
                        </div>
                    </div>

                    <div class="sentiment-stats">
                        <span id="bullishCount">0</span> صعودی
                        •
                        <span id="bearishCount">0</span> نزولی
                        • مجموع: <span id="totalVotes">0</span>
                    </div>

                    <div class="vote-buttons">
                        <button onclick="vote('bullish')" class="btn-bullish">صعودی ↑</button>
                        <button onclick="vote('bearish')" class="btn-bearish">نزولی ↓</button>
                    </div>

                    <div id="voteMessage"></div>
                </div>

                <button class="add_comment" id="addComment" onclick="showCommenting()">
                    +
                </button>

                <div id="commenting">
                    <textarea class="commenting-userame" id="commentingUserame" placeholder="نام کاربری">user</textarea>
                    <textarea class="commenting-comment" id="commentingComment"
                        placeholder="نظر خود را بنویسید"></textarea>
                    <div>
                        <button class="commentin-add" onclick="addCommentFun()">تایید</button>
                        <button class="commentin-add" onclick="hideCommenting()">انصراف</button>
                    </div>
                </div>

                <div id="commentsList">

                </div>
            </div>
        </div>
    </div>



    <script src="/static/js/inf-coin.js"></script>
    <script src="/static/js/culator-coin.js"></script>
    <script src="/static/js/chart-coin.js"></script>
    <script src="/static/js/description-coin.js"></script>
    <script src="/static/js/survey-coin.js"></script>
    <script src="/static/js/comment-coin.js"></script>

</body>

</html>